<template>
  <require from="../../common/person/gender.binder"></require>
  <require from="../../../shell/layouts/form-layout"></require>

  <form-layout title.bind="title">

    <section slot="title-section">
      <custom-breadcrumbs items.bind="breadcrumbItems"></custom-breadcrumbs>
    </section>

    <section slot="tool-section">
      <tool-bar>
        <add-tool exec.call="add()"></add-tool>
        <tile-tool exec.call="add()"></tile-tool>
        <list-tool exec.call="add()"></list-tool>
        <dropdown-menu-tool>
          <tool-bar>
            <list-tool exec.call="add()"></list-tool>
            <tile-tool exec.call="add()"></tile-tool>
            <add-tool exec.call="add()"></add-tool>
          </tool-bar>
          <dropdown-menu-tool-item exec.call="add()">Men</dropdown-menu-tool-item>
          <dropdown-menu-tool-item exec.call="add()">Men 2</dropdown-menu-tool-item>
          <dropdown-menu-tool-item exec.call="add()">Men 2</dropdown-menu-tool-item>
          <dropdown-menu-tool-item exec.call="add()">Men 2</dropdown-menu-tool-item>
        </dropdown-menu-tool>
      </tool-bar>

    </section>

    <!-- form section -->
    <section slot="form-section">
      <form id="input-form" class="form" validation-errors="errors.bind: errors; controller.bind: validator"
        submit.delegate="save()">
        <!-- 
        <span class="help-block" repeat.for="errorInfo of errors">
          ${errorInfo.error.message}
        </span>
        -->

        <div class="form-group">
          <div class="form-group__title">
            <h3 class="label">Profile</h3>
            <p class="desc">
              This information will be displayed publicly so be careful what you share.
            </p>
          </div>
          <div class="form-group__content">

            <!-- <div class="mt-2 mb-3">
              <label class="uppercase block text-sm leading-5 font-medium text-gray-700">
                Photo
              </label>
              <div class="mt-2 flex items-center">
                <span class="inline-block h-32 w-32 rounded-full overflow-hidden bg-gray-100">
                  <img class="flex-nogrow rounded-full h-32 w-32 object-cover" if.bind="photo.data" src.bind="photo.data" />
                  <svg else class="h-full w-full text-gray-300" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M24 20.993V24H0v-2.996A14.977 14.977 0 0112.004 15c4.904 0 9.26 2.354 11.996 5.993zM16.002 8.999a4 4 0 11-8 0 4 4 0 018 0z" />
                  </svg>
                </span>
                <span class="ml-5 rounded-md shadow-sm">
                  <button type="button" click.delegate="changePhoto()"
                    class="py-2 px-3 border border-gray-300 rounded-md text-sm leading-4 font-medium text-gray-700 hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:shadow-outline-blue active:bg-gray-50 active:text-gray-800 transition duration-150 ease-in-out">
                    Change
                  </button>
                </span>
              </div>
            </div> -->


            <div class="field-group">
              <label class="group by-1">
                <span class="label">Photo</span>
                <div class="mt-2 flex items-center">
                  <span class="inline-block h-32 w-32 rounded-full overflow-hidden bg-gray-100">
                    <img class="flex-nogrow rounded-full h-32 w-32 object-cover" if.bind="photo.data"
                      src.bind="photo.data" />
                    <svg else class="h-full w-full text-gray-300" fill="currentColor" viewBox="0 0 24 24">
                      <path
                        d="M24 20.993V24H0v-2.996A14.977 14.977 0 0112.004 15c4.904 0 9.26 2.354 11.996 5.993zM16.002 8.999a4 4 0 11-8 0 4 4 0 018 0z" />
                    </svg>
                  </span>
                  <span class="ml-5 rounded-md shadow-sm">
                    <button type="button" click.delegate="changePhoto()"
                      class="py-2 px-3 border border-gray-300 rounded-md text-sm leading-4 font-medium text-gray-700 hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:shadow-outline-blue active:bg-gray-50 active:text-gray-800 transition duration-150 ease-in-out">
                      Change
                    </button>
                  </span>
                </div>
              </label>
            </div>

            <div class="field-group">
              <label class="group by-2">
                <span class="label">Username</span>
                <input class="input form-input" type="text" placeholder="Username" value.bind="user.username & validate"
                  focus="true" />
              </label>

              <label class="group by-2">
                <span class="label">Email</span>
                <input class="input form-input" type="email" placeholder="Email" value.bind="user.email & validate" />
              </label>
            </div>

          </div>
        </div>

        <div class="form-group__divider"></div>

        <div class="form-group">
          <div class="form-group__title">
            <h3 class="label">Personal Information</h3>
            <p class="desc">Use a permanent address where you can receive mail.</p>
          </div>
          <div class="form-group__content">
            <div class="field-group">
              <label class="group by-3">
                <span class="label">First Name</span>
                <input class="input form-input" type="text" placeholder="First Name"
                  value.bind="user.person.firstName & validate" />
              </label>
              <label class="group by-3">
                <span class="label">Middle Name</span>
                <input class="input form-input" type="text" placeholder="Middle Name"
                  value.bind="user.person.middleName & validate" />
              </label>
              <label class="group by-3">
                <span class="label">Last Name</span>
                <input class="input form-input" type="text" placeholder="Last Name"
                  value.bind="user.person.lastName & validate" />
              </label>
            </div>

            <div class="field-group" with.bind="user">
              <label class="group by-3">
                <span class="label">Birth Date</span>
                <input class="input form-input" type="date" placeholder="Birth Date"
                  value.bind="person.birthDate | date & validate" />
              </label>
              <label class="group by-3">
                <span class="label">Gender</span>
                <select class="input form-select" value.bind="person.gender & validate">
                  <option repeat.for="gender of Genders" model.bind="gender">${gender}</option>
                </select>
              </label>
            </div>

            <div class="field-group" with.bind="user">
              <label class="group by-2-3">
                <span class="label">Address Line 1</span>
                <input class="input form-input" placeholder="Address Line 1" value.bind="address.line1 & validate" />
                <p class="input-desc">Unit Number + House/Building/Street Number, Street Name</p>
              </label>
            </div>

            <div class="field-group" with.bind="user">
              <label class="group by-2-3">
                <span class="label">Address Line 2</span>
                <input class="input form-input" placeholder="Address Line 2" value.bind="address.line2 & validate" />
                <p class="input-desc">Subdivision/Village, Barangay/District Name</p>
              </label>
            </div>

            <div class="field-group" with.bind="user">
              <label class="group by-2">
                <span class="label">City / Municipality</span>
                <input class="input form-input" placeholder="City / Municipality"
                  value.bind="address.municipality & validate" />
              </label>
              <label class="group by-2">
                <span class="label">Province / Metro Manila</span>
                <input class="input form-input" placeholder="Province / Metro Manila"
                  value.bind="address.province & validate" />
              </label>
            </div>
          </div>
        </div>

        <div class="form-group__divider"></div>

        <div class="form-group">
          <div class="form-group__title">
            <h3 class="label">Access Rights</h3>
            <p class="desc">A user role defines permissions for users to perform a group of tasks.</p>
          </div>
          <div class="form-group__content">
            <div class="checkbox-group">
              <span class="label">Roles</span>
              <div class="checkboxes">
                <label class="group" repeat.for="role of roles">
                  <input class="input form-checkbox" type="checkbox" model.bind="role.id" checked.bind="user.roles" />
                  <span class="desc">${role.name}</span>
                </label>
              </div>
            </div>
          </div>
        </div>

      </form>
    </section>

    <section slot="form-actions">
      <input type="submit" class="primary" role="button" value="Save" form="input-form" />
      <input type="button" class="secondary" role="button" value="Cancel" click.delegate="cancel()" />
    </section>

  </form-layout>
</template>